/* =====================
   servicos.css — Página Serviços
   Atualizado: 2025-10-15
   - Arquitetura com @layer
   - Tokens reutilizáveis (raios, sombras, tipografia)
   - Hero de serviços (CTA corrigida)
   - Cards com lead, lista com checks, chips de meta e CTA forte
   - Container queries + prefers-reduced-motion
   ===================== */

@layer tokens, base, utilities, components, pages;

/* ---------- TOKENS ---------- */
@layer tokens {
  :root {
    /* Raio */
    --radius-xs: 0.5rem;
    --radius-sm: 0.75rem;
    --radius-md: 1rem;
    --radius-lg: 1.75rem;
    --radius-xl: clamp(1.75rem, 4vw, 2.5rem);

    /* Sombras */
    --shadow-sm: 0 10px 24px rgba(62, 39, 49, 0.08);
    --shadow-md: 0 16px 36px rgba(62, 39, 49, 0.12);
    --shadow-lg: 0 24px 48px rgba(62, 39, 49, 0.16);
    --shadow-xl: 0 32px 68px rgba(62, 39, 49, 0.2);

    /* Escala de espaçamento (mapeia tokens globais existentes) */
    --space-1: var(--space-2xs);
    --space-2: var(--space-xs);
    --space-3: var(--space-sm);
    --space-4: var(--space-md);
    --space-5: var(--space-lg);
    --space-6: var(--space-xl);

    /* Tipografia */
    --fs-sm: clamp(0.85rem, 1.4vw, 0.95rem);
    --fs-base: clamp(0.98rem, 1.6vw, 1.05rem);
    --fs-lg: clamp(1.05rem, 2vw, 1.25rem);
    --fs-xl: clamp(1.4rem, 2.8vw, 1.8rem);
    --fs-2xl: clamp(1.8rem, 3.2vw, 2.4rem);
    --lh-tight: 1.25;
    --lh-base: 1.65;
    --tracking-wide: 0.32em;

    /* Cores semânticas (usam tua paleta global) */
    --surface: color-mix(in srgb, #ffffff 92%, var(--areia-dourada) 8%);
    --surface-muted: color-mix(in srgb, var(--areia-dourada) 70%, #ffffff 30%);
    --border: color-mix(in srgb, var(--dourado-fosco) 45%, #ffffff 55%);
    --border-strong: color-mix(in srgb, var(--dourado-fosco) 60%, #ffffff 40%);
    --text: color-mix(in srgb, var(--marrom-terra-firme) 90%, #000000 10%);
    --text-muted: color-mix(in srgb, var(--marrom-terra-firme) 70%, #000000 30%);
    --accent: var(--terracota-queimado);
    --accent-contrast: color-mix(in srgb, var(--marsala-profundo) 85%, #ffffff 15%);

    /* Transições padrão */
    --transition-base: 220ms ease;
  }
}

/* ---------- BASE ---------- */
@layer base {
  .section-heading {
    display: grid;
    gap: var(--space-2);
    justify-items: center;
    text-align: center;
    margin: 0 0 clamp(var(--space-4), 5vw, var(--space-5));
    padding-block-start: var(--space-1);
  }

  .section-heading .kicker {
    margin: 0;
    font-size: var(--fs-sm);
    text-transform: uppercase;
    letter-spacing: var(--tracking-wide);
    color: color-mix(in srgb, var(--oliva-sutil) 80%, #000000 20%);
  }

  .section-text {
    margin: 0;
    max-inline-size: min(68ch, 90%);
    font-size: var(--fs-lg);
    line-height: var(--lh-base);
    color: var(--text-muted);
  }
}

/* ---------- UTILITIES ---------- */
@layer utilities {
  .grid-auto-fit {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(var(--min, 280px), 1fr));
    gap: var(--gap, var(--space-4));
  }

  .text-center { text-align: center; }
  .justify-center { justify-content: center; }
  .items-center { align-items: center; }

  .shadow-sm { box-shadow: var(--shadow-sm); }
  .shadow-md { box-shadow: var(--shadow-md); }
  .shadow-lg { box-shadow: var(--shadow-lg); }
  .shadow-xl { box-shadow: var(--shadow-xl); }

  .radius-sm { border-radius: var(--radius-sm); }
  .radius-md { border-radius: var(--radius-md); }
  .radius-lg { border-radius: var(--radius-lg); }
  .radius-xl { border-radius: var(--radius-xl); }

  .btn-pill { border-radius: 999px; }
  .btn-outline { background: transparent; border: 1px solid currentColor; color: inherit; }

  .motion-safe { transition: var(--motion-safe-transition, transform var(--transition-base)); }
  .motion-reduce { animation: none !important; transition: none !important; }

  [data-animate] {
    opacity: 0;
    transform: translateY(24px);
    transition: opacity 0.6s ease, transform 0.6s ease;
    will-change: opacity, transform;
  }

  [data-animate].is-visible {
    opacity: 1;
    transform: none;
  }
}

/* motion preferências do usuário */
@media (prefers-reduced-motion: reduce) {
  @layer utilities {
    [data-animate] {
      opacity: 1 !important;
      transform: none !important;
      transition: none !important;
    }
    .motion-safe { transition: none !important; animation: none !important; }
  }
}

/* ---------- COMPONENTS ---------- */
@layer components {
  /* Hero de serviços */
  .hero--servicos,
  .hero-servicos {
    --hero-bg:
      radial-gradient(circle at 0% 0%, rgba(201, 174, 143, 0.3), transparent 55%),
      radial-gradient(circle at 90% 10%, rgba(117, 42, 42, 0.2), transparent 60%),
      linear-gradient(135deg, var(--areia-dourada), var(--areia-dourada));
    --hero-highlight-icon: "✔";
    --hero-highlight-icon-color: var(--accent);
    --hero-highlight-bg: transparent;
    --hero-highlight-mobile-bg: rgba(255, 255, 255, 0.75);
    --hero-media-bg: rgba(255, 255, 255, 0.65);
    --hero-media-radius: var(--radius-xl);
    --hero-media-padding: clamp(0.8rem, 2vw, 1.2rem);
    --hero-media-shadow: var(--shadow-lg);
    background: var(--hero-bg);
    content-visibility: auto;
    contain-intrinsic-size: 1px 620px;
  }

  .hero--servicos .hero-grid {
    display: grid;
    grid-template-columns: minmax(0, 1.1fr) minmax(0, .9fr);
    gap: clamp(var(--space-4), 6vw, var(--space-6));
    align-items: center;
  }

  .hero--servicos .hero-copy { display: grid; gap: var(--space-3); }

  .hero--servicos .hero-cta {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
  }

  .hero--servicos .hero-highlights {
    display: grid;
    gap: var(--space-1);
    margin: 0;
    padding: 0;
    list-style: none;
  }

  .hero--servicos .hero-highlights li {
    position: relative;
    padding-inline-start: 1.6rem;
    line-height: var(--lh-base);
  }

  .hero--servicos .hero-highlights li::before {
    content: var(--hero-highlight-icon);
    position: absolute;
    inset-inline-start: 0;
    color: var(--hero-highlight-icon-color);
    font-weight: 700;
  }

  .hero--servicos .hero-media {
    background: var(--hero-media-bg);
    padding: var(--hero-media-padding);
    border-radius: var(--hero-media-radius);
    box-shadow: var(--hero-media-shadow);
    min-block-size: 220px;
  }

  /* Seção Serviços */
  .section-servicos,
  .section-diferenciais,
  .section-processo,
  .section-faq,
  .section-cta {
    position: relative;
    isolation: isolate;
    padding-block: clamp(var(--space-5), 7vw, calc(var(--space-6) + 1rem));
    content-visibility: auto;
    contain-intrinsic-size: 1px 640px;
  }

  .section-servicos {
    background:
      radial-gradient(180% 140% at 110% -10%, rgba(117, 42, 42, 0.08), transparent 55%),
      radial-gradient(120% 100% at -15% 15%, rgba(201, 174, 143, 0.22), transparent 60%),
      linear-gradient(180deg, rgba(255, 255, 255, 0.96), rgba(255, 255, 255, 0.88));
    container: servicos / inline-size;
  }

  .section-servicos::before,
  .section-servicos::after {
    content: "";
    position: absolute;
    inset-block-start: clamp(1rem, 4vw, 2.5rem);
    inline-size: clamp(120px, 20vw, 240px);
    aspect-ratio: 1;
    border-radius: 48% 52% 58% 42% / 46% 54% 46% 54%;
    opacity: 0.18;
    z-index: -1;
  }

  .section-servicos::before {
    inset-inline-start: -6%;
    background: radial-gradient(circle at 35% 30%, rgba(117, 42, 42, 0.55), transparent 70%);
  }

  .section-servicos::after {
    inset-inline-end: -4%;
    inset-block-start: auto;
    inset-block-end: clamp(2rem, 6vw, 4rem);
    background: radial-gradient(circle at 65% 65%, rgba(201, 174, 143, 0.7), transparent 75%);
  }

  /* Grid dos cards */
  .service-cards {
    --gap: clamp(var(--space-4), 5vw, var(--space-5));
    display: grid;
    gap: var(--gap);
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    align-items: stretch;
  }

  /* Card base */
  .service-card,
  .mini-card,
  .process-step {
    border-radius: var(--radius-xl);
    border: 1px solid var(--border);
    background: var(--surface);
    color: var(--text);
    box-shadow: var(--shadow-lg);
    transition:
      transform var(--transition-base),
      box-shadow var(--transition-base),
      border-color var(--transition-base),
      background-color var(--transition-base);
  }

  .service-card {
    position: relative;
    display: flex;
    flex-direction: column;
    gap: clamp(var(--space-3), 2.2vw, var(--space-4));
    padding: clamp(var(--space-4), 3vw, var(--space-5));
    overflow: hidden;
    isolation: isolate;
    container: service-card / inline-size;
  }

  .service-card::before {
    content: "";
    position: absolute;
    inset: 0;
    z-index: 0;
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.6), transparent);
    opacity: 0;
    transition: opacity var(--transition-base);
  }

  .service-card__background {
    position: absolute;
    inset: 0;
    background:
      radial-gradient(120% 120% at 0% 0%, rgba(255, 255, 255, 0.4), transparent 60%),
      radial-gradient(160% 160% at 80% -20%, rgba(117, 42, 42, 0.12), transparent 65%);
    opacity: 0;
    transition: opacity var(--transition-base);
    z-index: 0;
  }

  /* Destaque */
  .service-card.is-featured {
    border-color: var(--border-strong);
    background: color-mix(in srgb, var(--surface) 86%, rgba(117, 42, 42, 0.08) 14%);
    box-shadow: var(--shadow-xl);
  }

  .service-card.is-featured .service-card__background {
    opacity: 0.65;
    background:
      radial-gradient(140% 130% at 15% 10%, rgba(255, 255, 255, 0.55), transparent 60%),
      radial-gradient(160% 150% at 90% 10%, rgba(117, 42, 42, 0.18), transparent 65%);
  }

  /* Cabeçalho do card */
  .service-card__header {
    position: relative;
    z-index: 1;
    display: grid;
    gap: var(--space-1);
  }

  .service-card__tag {
    justify-self: flex-start;
    padding: 0.4rem 0.9rem;
    border-radius: 999px;
    background: color-mix(in srgb, var(--accent) 18%, #ffffff 82%);
    color: color-mix(in srgb, var(--accent) 75%, #000000 25%);
    font-size: 0.72rem;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    font-weight: 600;
  }

  .service-card.is-featured .service-card__tag {
    background: color-mix(in srgb, var(--accent) 28%, #ffffff 72%);
    color: var(--accent-contrast);
  }

  .service-card__header h3 {
    margin: 0;
    font-family: "Cormorant Garamond", serif;
    font-size: clamp(1.5rem, 2.5vw, 2.05rem);
    line-height: var(--lh-tight);
  }

  .service-card .service-sub {
    margin: 0;
    font-weight: 600;
    letter-spacing: 0.04em;
    text-transform: uppercase;
    font-size: 0.82rem;
    color: color-mix(in srgb, var(--cinza-quente-neutro) 75%, #000000 25%);
  }

  /* Lead do card */
  .service-card__lead {
    position: relative;
    z-index: 1;
    margin: 0;
    font-size: var(--fs-base);
    line-height: var(--lh-base);
    color: var(--text-muted);
  }

  /* Lista com checks */
  .service-list {
    margin: 0;
    padding: 0;
    list-style: none;
    display: grid;
    gap: 0.6rem;
    position: relative;
    z-index: 1;
    color: color-mix(in srgb, var(--text) 90%, #000000 10%);
  }

  .service-list.service-list--checks li {
    position: relative;
    padding-inline-start: 1.6rem;
    display: block;
    font-size: var(--fs-base);
  }

  .service-list.service-list--checks li::before {
    content: "";
    position: absolute;
    inset-inline-start: 0;
    inset-block-start: .25rem;
    inline-size: 1rem;
    block-size: 1rem;
    border-radius: 50%;
    background:
      radial-gradient(circle at 40% 40%, rgba(117, 42, 42, .95), rgba(117, 42, 42, .5));
    box-shadow: 0 0 0 3px rgba(117, 42, 42, 0.14);
  }

  /* Meta (chips) */
  .service-meta {
    display: flex;
    flex-wrap: wrap;
    gap: .5rem .6rem;
    position: relative;
    z-index: 1;
  }

  .chip {
    display: inline-flex;
    align-items: center;
    gap: .4rem;
    padding: .35rem .7rem;
    border-radius: 999px;
    font-size: .8rem;
    border: 1px solid color-mix(in srgb, var(--accent) 35%, #fff 65%);
    background: color-mix(in srgb, var(--accent) 14%, #fff 86%);
    color: color-mix(in srgb, var(--marsala-profundo) 88%, #000 12%);
    white-space: nowrap;
  }

  .chip--soft {
    border-color: color-mix(in srgb, var(--dourado-fosco) 40%, #fff 60%);
    background: color-mix(in srgb, var(--dourado-fosco) 16%, #fff 84%);
    color: color-mix(in srgb, var(--berinjela-noturna) 70%, #000 30%);
  }

  /* Rodapé do card (CTA) */
  .service-card__footer {
    margin-block-start: auto;
    display: grid;
    gap: var(--space-2);
    position: relative;
    z-index: 1;
    grid-template-columns: 1fr auto;
    align-items: center;
  }

  .service-card :where(.btn-secondary) {
    justify-self: flex-start;
    min-inline-size: max-content;
    border-radius: 999px;
    padding-inline: clamp(1.3rem, 2.6vw, 1.6rem);
    padding-block: .7rem;
    background: color-mix(in srgb, var(--accent) 16%, #ffffff 84%);
    color: color-mix(in srgb, var(--marsala-profundo) 88%, #000000 12%);
    border: 1px solid color-mix(in srgb, var(--accent) 32%, #ffffff 68%);
    box-shadow: none;
    transition:
      background-color var(--transition-base),
      color var(--transition-base),
      border-color var(--transition-base),
      box-shadow var(--transition-base);
    font-weight: 700;
  }

  .service-card :where(.btn-secondary:hover, .btn-secondary:focus-visible) {
    background: color-mix(in srgb, var(--accent) 24%, #ffffff 76%);
    border-color: color-mix(in srgb, var(--accent) 48%, #ffffff 52%);
    color: var(--accent-contrast);
    box-shadow: 0 12px 24px rgba(117, 42, 42, 0.16);
  }

  /* Hover/focus */
  @media (hover: hover) {
    .service-card:hover,
    .service-card:focus-within {
      transform: translateY(-3px);
      box-shadow: var(--shadow-xl);
      border-color: var(--border-strong);
    }
    .service-card:hover::before,
    .service-card:focus-within::before,
    .service-card:hover .service-card__background,
    .service-card:focus-within .service-card__background {
      opacity: 1;
    }
  }

  /* Outras seções opcionais (mantidas) */
  .section-diferenciais { background: linear-gradient(160deg, rgba(255, 255, 255, 0.94), rgba(201, 174, 143, 0.2)); }

  .diferenciais-grid {
    display: grid;
    gap: clamp(var(--space-4), 5vw, var(--space-5));
    grid-template-columns: 1fr;
    align-items: start;
    container: diferenciais / inline-size;
  }

  .diferenciais-copy { display: grid; gap: var(--space-2); }

  .diferenciais-list {
    margin: 0;
    padding-inline-start: 1.1rem;
    display: grid;
    gap: 0.45rem;
  }

  .diferenciais-cards { display: grid; gap: clamp(var(--space-3), 3vw, var(--space-4)); }

  .mini-card {
    position: relative;
    z-index: 0;
    padding: clamp(var(--space-4), 3vw, var(--space-4));
    box-shadow: var(--shadow-md);
  }

  .mini-card h3 {
    margin: 0;
    font-family: "Cormorant Garamond", serif;
    font-size: clamp(1.35rem, 2.5vw, 1.8rem);
  }

  .mini-card p {
    margin: 0;
    color: var(--text-muted);
    line-height: var(--lh-base);
  }

  .section-processo { background: rgba(255, 255, 255, 0.92); }

  .process-steps {
    margin: 0;
    padding: 0;
    list-style: none;
    display: grid;
    gap: clamp(var(--space-3), 3vw, var(--space-4));
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  }

  .process-step {
    display: grid;
    gap: var(--space-2);
    padding: clamp(var(--space-4), 3vw, var(--space-5));
    box-shadow: var(--shadow-md);
  }

  .process-step .step-number {
    inline-size: 2.4rem;
    block-size: 2.4rem;
    border-radius: 50%;
    display: grid;
    place-items: center;
    font-weight: 700;
    font-size: 1.1rem;
    color: var(--accent-contrast);
    background: color-mix(in srgb, var(--accent) 65%, #ffffff 35%);
  }

  .process-step h3 {
    margin: 0;
    font-family: "Cormorant Garamond", serif;
    font-size: clamp(1.3rem, 2.2vw, 1.7rem);
  }

  .process-step p {
    margin: 0;
    color: var(--text-muted);
    line-height: var(--lh-base);
  }

  .cta-card :where(.btn-primary) {
    border-radius: 999px;
    padding-inline: clamp(1.3rem, 2.6vw, 1.7rem);
    box-shadow: 0 20px 40px rgba(117, 42, 42, 0.24);
  }

  .cta-card :where(.btn-primary:hover, .btn-primary:focus-visible) {
    background: linear-gradient(
      135deg,
      color-mix(in srgb, var(--marsala-profundo) 90%, #000000 10%),
      var(--marsala-profundo)
    );
    box-shadow: 0 24px 46px rgba(117, 42, 42, 0.3);
  }
}

/* ---------- PAGES / RESPONSIVO ---------- */
@layer pages {
  /* Service cards com breakpoints via container */
  @container servicos (min-width: 560px) {
    .service-cards { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  }
  @container servicos (min-width: 1000px) {
    .service-cards { grid-template-columns: repeat(3, minmax(0, 1fr)); }
  }

  /* Footer do card em 1 coluna quando muito estreito */
  @container service-card (max-width: 419px) {
    .service-card__footer { grid-template-columns: 1fr; }
  }

  /* Listas em 2 colunas quando cabe */
  @container service-card (min-width: 520px) {
    .service-list {
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 0.65rem 1.4rem;
    }
    .service-card__header { gap: var(--space-2); }
  }

  /* Hero responsivo */
  @media (max-width: 960px) {
    .hero--servicos .hero-grid {
      grid-template-columns: minmax(0, 1fr);
      text-align: center;
    }
    .hero--servicos .hero-copy { justify-items: center; }
    .hero--servicos .hero-cta { justify-content: center; }
  }

  /* Mobile refinado */
  @media (max-width: 720px) {
    .hero--servicos .hero-highlights li::before { display: none; }
    .hero--servicos .hero-highlights li {
      padding: 0.4rem 0.75rem;
      border-radius: 999px;
      background: var(--hero-highlight-mobile-bg);
    }

    .service-card { text-align: start; }
    .service-card__footer { justify-items: start; }
    .service-list { justify-items: start; }
  }

  @media (max-width: 480px) {
    .service-card {
      gap: var(--space-3);
      padding: clamp(var(--space-3), 5vw, var(--space-4));
    }
    .mini-card,
    .process-step {
      padding: clamp(var(--space-3), 5vw, var(--space-4));
    }
  }
}

/* High contrast / forced-colors */
@media (forced-colors: active) {
  .service-card,
  .mini-card,
  .process-step {
    forced-color-adjust: auto;
    color: ButtonText;
    background: Canvas;
    border-color: ButtonText;
    box-shadow: none;
  }
  .chip,
  .btn-secondary { border-color: ButtonText; }
}
